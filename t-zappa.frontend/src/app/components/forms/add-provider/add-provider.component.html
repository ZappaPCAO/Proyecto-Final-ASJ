<main class="mi-bg-black">
    <div class="container py-2">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="card shadow-light bg-light px-2">
                    <div class="card-header p-0 m-0">
                        <h3 class="text-center font-weight-light p-1 my-0">Nuevo Proveedor</h3>
                        <p class="h6 text-start p-0 m-0">
                            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="12" viewBox="0 0 384 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path fill="#d6b300" d="M192 32c17.7 0 32 14.3 32 32V199.5l111.5-66.9c15.2-9.1 34.8-4.2 43.9 11s4.2 34.8-11 43.9L254.2 256l114.3 68.6c15.2 9.1 20.1 28.7 11 43.9s-28.7 20.1-43.9 11L224 312.5V448c0 17.7-14.3 32-32 32s-32-14.3-32-32V312.5L48.5 379.4c-15.2 9.1-34.8 4.2-43.9-11s-4.2-34.8 11-43.9L129.8 256 15.5 187.4c-15.2-9.1-20.1-28.7-11-43.9s28.7-20.1 43.9-11L160 199.5V64c0-17.7 14.3-32 32-32z"/></svg>
                            <strong class="mx-2">Requerido</strong>
                        </p>
                    </div>
                    <div class="card-body">
                        <form #miForm="ngForm" (ngSubmit)="agregarProvider(miForm)">                            
                            <div class="row mb-3">
                                <p class="h6">Datos de la Empresa: </p> 
                                <div class="col-md-4">                                    
                                    <div class=" form-floating mb-3 mb-md-0">
                                        <input #logo="ngModel" [ngClass]="!logo.value ? 'mi-requerido': logo.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'" minlength="3" maxlength="255" required class="form-control form-control-sm" name="logo" [(ngModel)]="provider.logo" type="url" placeholder="" />
                                        <label id="labelCode" for="inputCode">Logo:</label>
                                        <ng-container *ngIf="logo.value">
                                            <span *ngIf="logo.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud minima 3
                                            </span>
                                            <span *ngIf="logo.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud maxima 25
                                            </span>                                             
                                        </ng-container>
                                    </div>                                    
                                </div> 
                                <div class="col-md-4">                                    
                                    <div class=" form-floating mb-3 mb-md-0">
                                        <input #codProvider="ngModel" [ngClass]="!codProvider.value ? 'mi-requerido': codProvider.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'" minlength="3" maxlength="25" required class="form-control form-control-sm" name="codProvider" [(ngModel)]="provider.codProvider" type="text" placeholder="" />
                                        <label id="labelCode" for="inputCode">Codigo proveedor:</label>
                                        <ng-container *ngIf="codProvider.value">
                                            <span *ngIf="codProvider.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud minima 3
                                            </span>
                                            <span *ngIf="codProvider.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud maxima 25
                                            </span>                                             
                                        </ng-container>
                                    </div>                                    
                                </div>
                                <div class="col-md-4">
                                    <div class=" form-floating">
                                        <input #bussName="ngModel"  class="form-control form-control-sm" name="bussName" [(ngModel)]="provider.businessName" type="text" placeholder=""
                                        [ngClass]="!bussName.value ? 'mi-requerido': bussName.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        required minlength="3" maxlength="25" >
                                        <label for="inputRazonSocial">Razon Social:</label>
                                        <ng-container *ngIf="bussName.value">
                                            <span *ngIf="bussName.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud minima 3
                                            </span>
                                            <span *ngIf="bussName.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud maxima 25
                                            </span>                                             
                                        </ng-container>
                                    </div>
                                </div>                                
                            </div>
                            <div class="row mb-4 ">                                                                                            
                                <div class="col-md-3">
                                    <div class=" form-floating mb-3">
                                        <input required minlength="3" class="form-control form-control-sm" name="website" [(ngModel)]="provider.website" 
                                        #website="ngModel" [ngClass]="!website.value ? 'mi-requerido': website.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        type="url" placeholder="" />
                                        <label for="inputSitioWeb">Sitio Web:</label>
                                        <ng-container *ngIf="website.value">
                                            <span *ngIf="website.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud minima 3
                                            </span>
                                            <span *ngIf="website.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud maxima 50
                                            </span>                                             
                                        </ng-container> 
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class=" form-floating mb-3 mb-md-0">
                                        <input required class="form-control form-control-sm" name="emailOne" [(ngModel)]="provider.email" type="email" minlength="4" placeholder=""
                                        #emailOne="ngModel" [ngClass]="!emailOne.value ? 'mi-requerido': emailOne.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        />
                                        <label id="labelCode" for="inputCode">E-mail:</label>
                                        <ng-container *ngIf="emailOne.value">
                                            <span *ngIf="emailOne.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud minima 4
                                            </span>
                                            <span *ngIf="emailOne.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud maxima 50
                                            </span>                                             
                                        </ng-container> 
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class=" form-floating">
                                        <input required maxlength="12" class="form-control form-control-sm" name="telefonoEmpresa" [(ngModel)]="provider.phone" type="text" placeholder=""
                                        #phoneOne="ngModel" [ngClass]="!phoneOne.value ? 'mi-requerido': phoneOne.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        />
                                        <label for="inputRazonSocial">Telefono: </label>
                                        <ng-container *ngIf="phoneOne.value">
                                            <span class="invalid-feedback mi-invalid-feedback">
                                                Formato invalido
                                            </span>
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class=" form-floating mb-3 mb-md-0 d-flex">
                                        <select required class="form-select form-select-sm" name="sector" [(ngModel)]="provider.sector.id"
                                        #sector="ngModel" [ngClass]="!sector.value ? 'mi-requerido': sector.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        >
                                            <option *ngFor="let sector of this.sectors; index as i" value="{{ sector.id }}">{{ sector.sector }}</option>
                                            <!-- Mas opc -->
                                        </select>                                        
                                        <label id="labelRubro" for="inputRubro">Rubro:</label>                                         
                                        <ng-container *ngIf="sector.value">
                                            <span *ngIf="sector.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud minima 3
                                            </span>
                                            <span *ngIf="sector.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud maxima 25
                                            </span>                                             
                                        </ng-container>    
                                        <span class="mt-1 ms-1">                                                        
                                            <button title="Agregar nuevo rubro" type="button" class="btn btn-lg btn-outline-success">
                                                <svg xmlns="http://www.w3.org/2000/svg" height="14" width="12" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--><path fill="#8732cd" d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/></svg>
                                            </button>
                                        </span>                                   
                                    </div>                                    
                                </div>
                            </div>
                            <div class="row mb-3">                      
                                <p class="h6">Direccion: </p>
                                <div class="col-md-4">                                                                                                       
                                    <div class=" form-floating">                                                                                                               
                                        <input required minlength="3" maxlength="30" type="text" class="form-control form-control-sm" 
                                         name="street" [(ngModel)]="provider.location.street" placeholder=""
                                         #street="ngModel" [ngClass]="!street.value ? 'mi-requerido': street.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'">
                                        <label for="inputCalle">Calle: </label>
                                        <ng-container *ngIf="street.value">
                                            <span *ngIf="street.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud maxima 30
                                            </span>
                                            <span *ngIf="street.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud minima 3
                                            </span>                                                                                         
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class=" form-floating">                                                        
                                        <input required min="1" max="99999" type="number" class="form-control form-control-sm" name="nroCalle" [(ngModel)]="provider.location.number" placeholder=""
                                        #streetNumber="ngModel" [ngClass]="!streetNumber.value ? 'mi-requerido': streetNumber.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'">
                                        <label for="inputCalleNro">Numero: </label>
                                        <ng-container *ngIf="streetNumber.value">
                                            <span *ngIf="streetNumber.errors?.['max']" class="mi-invalid-feedback">
                                                Longitud maxima 5
                                            </span>
                                            <span *ngIf="streetNumber.errors?.['min']" class="mi-invalid-feedback">
                                                Valor positivo
                                            </span>                                                                                         
                                        </ng-container> 
                                    </div>
                                </div>
                                <div class="col-md-4">                                                                                                       
                                    <div class=" form-floating">                                                                                                               
                                        <input required type="text" maxlength="8" minlength="3" class="form-control form-control-sm" name="postalCode" [(ngModel)]="provider.location.postalCode" placeholder=""
                                        #postalCode="ngModel" [ngClass]="!postalCode.value ? 'mi-requerido': postalCode.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'">
                                        <label for="inputCalle">Cod. Postal: </label>
                                        <ng-container *ngIf="postalCode.value">
                                            <span *ngIf="postalCode.errors?.['minlength']" class="mi-invalid-feedback">
                                                Longitud minima 3
                                            </span>
                                            <span *ngIf="postalCode.errors?.['maxlength']" class="mi-invalid-feedback">
                                                Longitud maxima 8
                                            </span>                                             
                                        </ng-container> 
                                    </div>
                                </div>                                
                            </div>     
                            <div class="row mb-5">
                                <div class="col-md-4">  
                                    <div class=" form-floating">                                                 
                                        <select required class="form-select form-select-sm" name="country" [(ngModel)]="provider.location.city.state.country.id"  (change)="updateStates(countryModel.value)"
                                        #countryModel="ngModel" [ngClass]="!countryModel.value ? 'mi-requerido': countryModel.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        >
                                            <option *ngFor="let country of countries; index as i" value="{{ country.id }}">{{ country.name }}</option>
                                            <!-- Mas opc -->
                                        </select>
                                        <label for="SelPais">País:</label>
                                        <ng-container *ngIf="countryModel.value">
                                            <span class="invalid-feedback mi-invalid-feedback">
                                                Requerido
                                            </span>
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="col-md-4">  
                                    <div class=" form-floating">                                                 
                                        <select required class="form-control form-control-sm" name="state" [(ngModel)]="provider.location.city.state.id" (change)="updateCities(stateModel.value)"
                                        #stateModel="ngModel" [ngClass]="!stateModel.value ? 'mi-requerido': stateModel.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        >
                                            <option *ngFor="let state of this.states; index as i" value="{{ state.id }}">{{ state.name }}</option>
                                        </select>
                                        <label for="SelPais">Provincia:</label>
                                        <ng-container *ngIf="stateModel.value">
                                            <span class="invalid-feedback mi-invalid-feedback">
                                                Requerido
                                            </span>
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="col-md-4">  
                                    <div class=" form-floating">                                                 
                                        <select required class="form-control form-control-sm" name="city" [(ngModel)]="provider.location.city.id"
                                        #city="ngModel" [ngClass]="!city.value ? 'mi-requerido': city.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                        >
                                            <option  *ngFor="let city of this.cities ; index as i" value="{{ city.id }}">{{ city.name }}</option>
                                        </select>
                                        <label for="SelLocalidad">Localidad:</label>
                                        <ng-container *ngIf="city.value">
                                            <span class="invalid-feedback mi-invalid-feedback">
                                                Requerido
                                            </span>
                                        </ng-container>
                                    </div>
                                </div>
                            </div>                     
                            <div class="row mb-3">
                                <div class="col-md-2 mb-3">
                                    <div class="row mb-3">
                                        <p class="h6">Datos Fiscales: </p>
                                        <div class="col-md-12">                                                                                                       
                                            <div class=" form-floating">                                                                                                               
                                                <input required maxlength="13" minlength="10"  type="text" class="form-control form-control-sm" name="cuit" [(ngModel)]="provider.taxData.cuit" placeholder=""
                                                #cuit="ngModel" [ngClass]="!cuit.value ? 'mi-requerido': cuit.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                                >
                                                <label for="inputCuit">CUIT: </label>
                                                <ng-container *ngIf="cuit.value">
                                                    <span *ngIf="cuit.errors?.['minlength']" class="mi-invalid-feedback">
                                                        Longitud minima 10
                                                    </span>
                                                    <span *ngIf="cuit.errors?.['maxlength']" class="mi-invalid-feedback">
                                                        Longitud maxima 13
                                                    </span>                                             
                                                </ng-container> 
                                            </div>
                                        </div>                                    
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class=" form-floating">
                                                <select required class="form-select form-select-sm" name="ivaCondition" [(ngModel)]="provider.taxData.ivaCondition.id"
                                                #ivaCondition="ngModel" [ngClass]="!ivaCondition.value ? 'mi-requerido': ivaCondition.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                                >
                                                    <option *ngFor="let condition of this.ivaConditions; index as i" value="{{ condition.id }}">{{ condition.condition }}</option>
                                                </select>                                               
                                                <label for="inputCondIva">Cond. iva: </label>
                                                <ng-container *ngIf="ivaCondition.value">
                                                    <span class="invalid-feedback mi-invalid-feedback">
                                                        Requerido
                                                    </span>
                                                </ng-container>                                                    
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-10">
                                    <div class="row mb-3">
                                        <p class="h6">Datos de Contacto: </p>
                                        <div class="col-md-6">                                                                                                       
                                            <div class=" form-floating">                                                                                                               
                                                <input required minlength="3" maxlength="25" type="text" class="form-control form-control-sm" name="name" [(ngModel)]="provider.contactData.name" placeholder=""
                                                #name="ngModel" [ngClass]="!name.value ? 'mi-requerido': name.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                                >
                                                <label for="inputNombre">Nombre: </label>
                                                <ng-container *ngIf="name.value">
                                                    <span *ngIf="name.errors?.['minlength']" class="mi-invalid-feedback">
                                                        Longitud minima 3
                                                    </span>
                                                    <span *ngIf="name.errors?.['maxlength']" class="mi-invalid-feedback">
                                                        Longitud maxima 25
                                                    </span>                                             
                                                </ng-container> 
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class=" form-floating">                                                        
                                                <input required minlength="3" maxlength="30" type="text" class="form-control form-control-sm" name="lastName" [(ngModel)]="provider.contactData.lastName" placeholder=""
                                                #lastName="ngModel" [ngClass]="!lastName.value ? 'mi-requerido': lastName.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                                >
                                                <label for="inputApellido">Apellido: </label>
                                                <ng-container *ngIf="lastName.value">
                                                    <span *ngIf="lastName.errors?.['minlength']" class="mi-invalid-feedback">
                                                        Longitud minima 3
                                                    </span>
                                                    <span *ngIf="lastName.errors?.['maxlength']" class="mi-invalid-feedback">
                                                        Longitud maxima 30
                                                    </span>                                             
                                                </ng-container> 
                                            </div>
                                        </div>                                                        
                                    </div>                                    
                                    <div class="row mb-3">                                            
                                        <div class="col-md-6">
                                            <div class=" form-floating mb-3">
                                                <input required minlength="4" maxlength="50" class="form-control form-control-sm" name="emailTwo" [(ngModel)]="provider.contactData.email" type="email" placeholder="name@example.com" 
                                                #emailTwo="ngModel" [ngClass]="!emailTwo.value ? 'mi-requerido': emailTwo.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                                >
                                                <label for="inputEmail">Email:</label>
                                                <ng-container *ngIf="emailTwo.value">
                                                    <span *ngIf="emailTwo.errors?.['minlength']" class="mi-invalid-feedback">
                                                        Longitud minima 4
                                                    </span>
                                                    <span *ngIf="emailTwo.errors?.['maxlength']" class="mi-invalid-feedback">
                                                        Longitud maxima 50
                                                    </span>                                             
                                                </ng-container> 
                                            </div>
                                        </div>                                                                        
                                        <div class="col-md-3">
                                            <div class=" form-floating">                                                        
                                                <input required maxlength="12" type="number" class="form-control form-control-sm" name="phoneTwo" [(ngModel)]="provider.contactData.phone" placeholder=""
                                                #phoneTwo="ngModel" [ngClass]="!phoneTwo.value ? 'mi-requerido': phoneTwo.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                                >
                                                <label for="inputTelefono">Telefono: </label>
                                                <ng-container *ngIf="phoneTwo.value">
                                                    <span class="invalid-feedback mi-invalid-feedback">
                                                        Formato invalido
                                                    </span>
                                                </ng-container>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class=" form-floating">                                                        
                                                <input required minlength="3" maxlength="30" type="text" class="form-control form-control-sm" name="role" [(ngModel)]="provider.contactData.role" placeholder=""
                                                #role="ngModel" [ngClass]="!role.value ? 'mi-requerido': role.errors ? 'is-invalid mi-invalid' : 'is-valid mi-valid'"
                                                >
                                                <label for="inputRol">Rol: </label>
                                                <ng-container *ngIf="role.value">
                                                    <span *ngIf="role.errors?.['minlength']" class="mi-invalid-feedback">
                                                        Longitud minima 3
                                                    </span>
                                                    <span *ngIf="role.errors?.['maxlength']" class="mi-invalid-feedback">
                                                        Longitud maxima 30
                                                    </span>                                             
                                                </ng-container>                                        
                                            </div>
                                        </div>                                                        
                                    </div>                                    
                                </div>                                                                            
                            </div>                                                                                                          
                            <div class="mt-4 mb-0">
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-block mi-btn-add">Crear Proveedor</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
